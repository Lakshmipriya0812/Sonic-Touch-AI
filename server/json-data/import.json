const fs = require("fs");
const mongoose = require("mongoose");
const  // Your existing Product schema

// MongoDB Connection
mongoose
  .connect("mongodb://localhost:27017/sonic-touch", {
    useNewUrlParser: true,
    useUnifiedTopology: true,
  })
  .then(() => console.log("✅ MongoDB connected"))
  .catch((err) => console.error("❌ MongoDB connection error:", err));

// Read JSON File
const jsonData = fs.readFileSync("./products.json", "utf-8");

const products = JSON.parse(jsonData);

// Insert Data into MongoDB
const importData = async () => {
  try {
    await Product.insertMany(products);
    console.log("✅ JSON data imported successfully!");
    mongoose.connection.close();
  } catch (error) {
    console.error("❌ Error importing data:", error);
    mongoose.connection.close();
  }
};

importData();
